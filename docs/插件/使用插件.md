---
sidebar_position: 1
title: 加载/使用插件
id: usePlugin
---

# 🔌 加载 / 使用插件

Yuml 支持通过插件机制扩展功能，包括自定义组件、添加新元素、增强组件行为等。

---

:::tip
每个 Yuml 插件应当是一个**独立的目录**，且该目录必须包含一个 `main.py` 文件。  
请确保插件结构正确，否则无法被识别加载。
:::

---

## 📦 插件加载机制

与传统语言按“单个插件/模块加载”的方式不同，Yuml 是通过指定**整个插件目录**来一次性加载多个插件。

Yuml 会自动**遍历该目录下的所有子文件夹**，并识别其中的插件内容。

---

## 🧭 如何加载插件目录？

使用 `IMPORT` 元素来指定插件所在目录名：

```yaml
IMPORT: 插件文件夹名
```

示例：

假设你的插件目录结构如下：
```
plugins/
 MyPlugin1/
  main.py
 MyPlugin2/
  main.py
```
那么只需写：

```yaml
IMPORT: plugins
```

Yuml 会自动遍历 `plugins` 文件夹，并识别所有子目录下的 `main.py` 插件文件。

---

## 🧰 插件能做什么？

Yuml 插件机制非常灵活，支持以下几种扩展能力：

### ✅ 扩展组件元素（通过`cw控制器`）

你可以为现有组件（如 button、label 等）添加新的元素行为，示例：

```yaml
button:
  btn1:
    myCustomAttr: true
```

在插件中通过`cw控制器`注册即可生效。

---

### ✅ 扩展普通元素

你可以自定义一个新的顶级元素，如：

```yaml
MyNewElement: ...
```

然后在插件中通过普通元素注册机制接管该逻辑。

---

### ✅ 注册新的组件类型

插件还可以通过`cw控制器`注册**全新的组件类型**，使得你可以扩展 UI 控件系统。

---

## 📘 小结

| 功能                | 插件中实现方式       |
|---------------------|----------------------|
| 扩展组件元素        | 使用`cw控制器`     |
| 扩展普通元素        | 注册元素处理函数     |
| 自定义新组件        | 注册组件构造逻辑     |

---

插件机制是 Yuml 的强大扩展方式，配合 `Globals` 与 `块机制`，可以构建出复杂且灵活的系统架构。
如果你正在开发自己的组件或框架，推荐使用插件方式封装逻辑。

:::tip
当多个插件定义了**相同名称的元素**时，Yuml 会自动进行**命名冲突处理**，避免相互覆盖。

具体规则如下：

如果插件 A 和插件 B 都定义了名为 `test` 的元素，且 **B 在 A 之后加载**，  
那么 B 插件中的元素将被自动重命名为：

```
test_B
```

这样可以确保两个插件的定义互不干扰。

✅ 这是 Yuml 插件系统的**默认行为**，无需手动处理。
:::